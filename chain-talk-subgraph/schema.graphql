# 定义“主题”实体，并声明它是不可变的
type Topic @entity(immutable: true) {
  # 我们使用合约中的 topicId 作为唯一ID
  id: ID!

  # 发帖人地址
  author: Bytes! @index

  # 主题内容
  content: String!

  # 创建时的时间戳
  timestamp: BigInt!

  # 自动关联到这个主题的所有回复。
  # @derivedFrom 指明这个字段是一个反向链接，
  # 由 Reply 实体的 'topic' 字段计算得出。
  replies: [Reply!]! @derivedFrom(field: "topic")
}

# 定义“回复”实体，并声明它是不可变的
type Reply @entity(immutable: true) {
  # 我们使用合约中的 replyId 作为唯一ID
  id: ID!

  # 回复人地址
  author: Bytes! @index

  # 回复内容
  content: String!

  # 创建时的时间戳
  timestamp: BigInt!

  # 关联回它所属的 Topic 实体。
  # 这是多对一关系的关键。
  topic: Topic!
}