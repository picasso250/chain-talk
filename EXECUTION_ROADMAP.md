# Chain Talk 开发执行路线

## 第一阶段：智能合约修改 (已完成)

### 步骤1：分析现有合约结构
- [x] 查看当前合约代码
- [x] 理解现有数据结构
- [x] 确定需要修改的部分

### 步骤2：设计新的合约结构
- [x] 设计Topic数据结构
- [x] 设计Reply数据结构
- [x] 规划ID管理机制

### 步骤3：修改合约代码
- [x] 添加Topic结构体
- [x] 添加Reply结构体
- [x] 实现createTopic函数
- [x] 实现createReply函数
- [x] 修改事件定义

### 步骤4：更新前端常量
- [x] 更新CONTRACT_ABI
- [x] 编译合约验证
- [x] 测试合约交互

## 第二阶段：前端重构 (已完成)

### 步骤5：重构为单页展开式论坛
- [x] 移除原有日记相关代码
- [x] 实现主题列表展示
- [x] 添加发主题组件

### 步骤6：实现展开/收起功能
- [x] 实现标题点击展开
- [x] 实现主题内容展示
- [x] 添加回复列表组件

### 步骤7：实现回复功能
- [x] 添加回复表单组件
- [x] 实现回复提交逻辑
- [x] 实现回复展示

### 步骤8：重构数据流
- [x] 修改数据获取逻辑
- [x] 适配新的数据结构
- [x] 实现主题和回复的关联展示

## 第三阶段：测试和优化

### 步骤9：功能测试
- [x] 测试创建主题功能
- [x] 测试回复功能
- [x] 验证数据展示

### 步骤10：部署测试
- [x] 部署到测试网 (Sepolia)
- [x] 验证链上数据
- [ ] 优化用户体验 (正在进行)

## 第四阶段：V2EX 发布准备 (当前重点)

为了在 V2EX 发布并获得良好反馈，必须降低用户访问门槛。

### 步骤11：实现只读模式 (Read-Only Mode)
- [ ] **配置公共 RPC Provider**: 允许非 Web3 用户直接读取链上数据。
- [ ] **更新数据获取逻辑**: 当未检测到钱包时，自动回退到只读 Provider。
- [ ] **UI 适配**: 明确区分"访客状态"和"用户状态"，引导连接钱包。

### 步骤12：部署上线
- [ ] 构建生产环境版本 (`npm run build`)
- [ ] 部署至 Netlify
- [ ] 验证生产环境公网访问

### 步骤13：社区推广 (V2EX)
- [ ] 撰写发布文案 (强调技术栈：Svelte 5 + Solidity + No Backend)
- [ ] 准备 Demo 截图/GIF
- [ ] 发布并收集反馈

---

## 执行记录

### 当前状态：准备实施只读模式
- **已完成**：全栈原型开发（合约+前端），功能闭环。
- **当前任务**：集成 Public RPC，实现无钱包浏览。
- **目标**：确保用户打开链接即可看到内容，无需强制安装 MetaMask。

### 合约部署信息
- **网络**：Sepolia测试网
- **合约地址**：0xb7BAf091e545AD99e54473E6b7d09939E6d34A04
- **Chain ID**：11155111 (0xaa36a7)

### 技术栈亮点
- Frontend: Svelte 5 (Runes) + Tailwind CSS + Ethers.js v6
- Backend: Solidity 0.8.30 + Hardhat
- Network: Arbitrum Sepolia / Sepolia
