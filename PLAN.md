# Chain Talk - 链上极简论坛开发计划

## 产品定位
- **名称**：Chain Talk
- **口号**：永恒对话，链上留声
- **定位**：极简的通用链上论坛
- **特色**：钱包即身份，永久保存，抗审查

## 核心功能（第一版原型）

### 1. 基础结构
- **主题（Topic）**：用户创建的讨论主题
- **回复（Reply）**：对主题的回复
- **钱包身份**：地址作为唯一身份标识

### 2. 用户界面
- **主题列表页**：显示所有主题，按时间排序
- **主题详情页**：显示主题内容和所有回复
- **发主题表单**：极简的标题+内容输入
- **回复表单**：极简的内容输入

### 3. 数据结构
```
主题：{标题, 内容, 作者地址, 时间戳, 主题ID}
回复：{内容, 作者地址, 时间戳, 主题ID, 回复ID}
```

### 4. 智能合约设计
- `createTopic(title, content)` - 创建主题
- `createReply(topicId, content)` - 回复主题
- `getTopics()` - 获取所有主题
- `getReplies(topicId)` - 获取主题的所有回复

## 技术实现要点

### 1. 合约修改
- 将单个`writeEntry`改为`createTopic`和`createReply`
- 添加主题ID和回复ID管理
- 事件分离：`TopicCreated`和`ReplyCreated`

### 2. 前端修改
- 页面结构：列表页 + 详情页
- 路由：简单的页面路由
- UI：保持极简风格，复用现有设计

### 3. 数据展示
- 主题列表：标题 + 作者 + 时间 + 回复数
- 主题详情：完整内容 + 回复时间线

## 开发步骤

### 第一阶段：智能合约
1. 修改现有合约，支持主题和回复
2. 添加主题ID管理（自增ID）
3. 分离事件类型
4. 测试合约功能

### 第二阶段：前端重构
1. 添加简单路由系统
2. 创建主题列表页面
3. 创建主题详情页面
4. 重构发帖和回复组件

### 第三阶段：数据流适配
1. 修改数据获取逻辑
2. 适配新的数据结构
3. 实现主题和回复的展示
4. 添加回复计数功能

### 第四阶段：测试部署
1. 本地测试完整流程
2. 部署到Arbitrum测试网
3. 验证链上数据
4. 优化用户体验

## 技术栈
- **前端**：Svelte + Vite + Tailwind CSS
- **区块链**：Ethers.js + Arbitrum One
- **智能合约**：Solidity
- **身份**：MetaMask钱包连接

## 设计原则
- **极简主义**：最少的功能，最清晰的界面
- **永久性**：所有数据永久存储在链上
- **抗审查**：去中心化，无法删除或修改
- **匿名性**：钱包地址作为唯一身份

## 成功指标
- 用户能够成功创建主题
- 用户能够成功回复主题
- 数据正确显示在链上
- 界面简洁易用